import { MoreVert as MoreVertIcon } from '@mui/icons-material';
import {
  Box,
  Typography,
  IconButton,
  List,
  ListItem,
  ListItemText,
  ListItemIcon,
  Avatar,
  Divider
} from '@mui/material';
import React from 'react';

interface Activity {
  id: string;
  user: string;
  avatar: string;
  action: string;
  time: string;
  type: 'booking' | 'service' | 'maintenance' | 'payment';
}

const mockActivities: Activity[] = [
  {
    id: '1',
    user: 'John Smith',
    avatar: 'JS',
    action: 'Created a new service booking',
    time: '5 minutes ago',
    type: 'booking'
  },
  {
    id: '2',
    user: 'Sarah Lee',
    avatar: 'SL',
    action: 'Completed maintenance service',
    time: '2 hours ago',
    type: 'maintenance'
  },
  {
    id: '3',
    user: 'Mike Chen',
    avatar: 'MC',
    action: 'Processed payment for invoice #1234',
    time: '4 hours ago',
    type: 'payment'
  }
];

export interface RecentActivityProps {
  className?: string;
}

export const RecentActivity: React.FC<RecentActivityProps> = ({ className }) => {
  return (
    <Box sx={{ p: 3 }} className={className}>
      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>
        <Typography variant="h6" sx={{ color: '#fff', fontWeight: 600 }}>
          Recent Activity
        </Typography>
        <IconButton sx={{ color: 'rgba(255, 255, 255, 0.5)' }}>
          <MoreVertIcon />
        </IconButton>
      </Box>
      <List sx={{ '& .MuiListItem-root': { px: 0 } }}>
        {mockActivities.map((activity, index) => (
          <React.Fragment key={activity.id}>
            <ListItem alignItems="flex-start">
              <ListItemIcon sx={{ minWidth: 52 }}>
                <Avatar
                  sx={{
                    width: 32,
                    height: 32,
                    fontSize: '0.875rem',
                    bgcolor: getAvatarColor(activity.type)
                  }}
                >
                  {activity.avatar}
                </Avatar>
              </ListItemIcon>
              <ListItemText
                primary={
                  <Typography
                    variant="body2"
                    sx={{ color: '#fff', fontWeight: 500, mb: 0.5 }}
                  >
                    {activity.user}
                  </Typography>
                }
                secondary={
                  <Box>
                    <Typography
                      variant="body2"
                      sx={{ color: 'rgba(255, 255, 255, 0.7)', display: 'block' }}
                    >
                      {activity.action}
                    </Typography>
                    <Typography
                      variant="caption"
                      sx={{ color: 'rgba(255, 255, 255, 0.5)', mt: 0.5 }}
                    >
                      {activity.time}
                    </Typography>
                  </Box>
                }
              />
            </ListItem>
            {index < mockActivities.length - 1 && (
              <Divider
                component="li"
                sx={{
                  my: 1.5,
                  borderColor: 'rgba(255, 255, 255, 0.1)'
                }}
              />
            )}
          </React.Fragment>
        ))}
      </List>
    </Box>
  );
};

const getAvatarColor = (type: Activity['type']): string => {
  const colors = {
    booking: '#4CAF50',
    service: '#2196F3',
    maintenance: '#FF9800',
    payment: '#9C27B0'
  };
  return colors[type];
};

export default RecentActivity;
