/**
 * Notification types and interfaces
 */

/**
 * Type of notification
 */
export type NotificationType = 'info' | 'success' | 'warning' | 'error';

/**
 * Trigger type of notification
 */
export type NotificationTrigger = 'manual' | 'scheduled' | 'event';

/**
 * Status of notification
 */
export type NotificationStatus = 'active' | 'inactive' | 'archived';

/**
 * Channel of notification
 */
export type NotificationChannel = 'email' | 'push' | 'sms' | 'in-app';

/**
 * Media interface for notifications
 */
export interface NotificationMedia {
  /**
   * Image URL
   */
  image?: string;
  /**
   * Video URL
   */
  video?: string;
}

/**
 * Targeting interface for notifications
 */
export interface NotificationTargeting {
  /**
   * User groups
   */
  userGroups: string[];
  /**
   * Regions
   */
  regions: string[];
  /**
   * Languages
   */
  languages: string[];
  /**
   * Device types
   */
  deviceTypes?: ('mobile' | 'desktop' | 'tablet')[];
}

/**
 * Variant interface for notifications
 */
export interface NotificationVariant {
  /**
   * Variant ID
   */
  id: string;
  /**
   * Variant content
   */
  content: string;
  /**
   * Variant weight
   */
  weight: number;
}

/**
 * AB test interface for notifications
 */
export interface NotificationABTest {
  /**
   * Whether AB test is enabled
   */
  enabled: boolean;
  /**
   * Variants for AB test
   */
  variants: NotificationVariant[];
  /**
   * Start date of AB test
   */
  startDate?: string;
  /**
   * End date of AB test
   */
  endDate?: string;
  /**
   * Winning variant ID
   */
  winningVariantId?: string;
}

/**
 * Schedule interface for notifications
 */
export interface NotificationSchedule {
  /**
   * Start date of schedule
   */
  startDate?: string;
  /**
   * End date of schedule
   */
  endDate?: string;
  /**
   * Frequency of schedule
   */
  frequency?: 'once' | 'daily' | 'weekly' | 'monthly';
  /**
   * Time of day for schedule
   */
  timeOfDay?: string;
  /**
   * Days of week for schedule
   */
  daysOfWeek?: number[];
  /**
   * Timezone for schedule
   */
  timezone?: string;
}

/**
 * Template interface for notifications
 */
export interface NotificationTemplate {
  /**
   * Template ID
   */
  id: string;
  /**
   * Template title
   */
  title: string;
  /**
   * Template content
   */
  content: string;
  /**
   * Template URL
   */
  url?: string;
  /**
   * Trigger type of template
   */
  triggerType: NotificationTrigger;
  /**
   * Due days of template
   */
  dueDays?: number;
  /**
   * Status of template
   */
  status: NotificationStatus;
  /**
   * Last modified date of template
   */
  lastModified: string;
  /**
   * Order of template
   */
  order: number;
  /**
   * Media of template
   */
  media?: NotificationMedia;
  /**
   * Targeting of template
   */
  targeting?: NotificationTargeting;
  /**
   * AB test of template
   */
  abTest?: NotificationABTest;
  /**
   * Schedule of template
   */
  schedule?: NotificationSchedule;
  /**
   * Type of template
   */
  type?: NotificationType;
  /**
   * Channels of template
   */
  channels: NotificationChannel[];
}

/**
 * Preferences interface for notifications
 */
export interface NotificationPreferences {
  /**
   * User ID
   */
  userId: string;
  /**
   * Channels
   */
  channels: {
    [key in NotificationChannel]: boolean;
  };
  /**
   * Frequency
   */
  frequency: {
    marketing: 'daily' | 'weekly' | 'monthly' | 'never';
    system: 'immediate' | 'batched' | 'never';
  };
  /**
   * Quiet hours
   */
  quietHours?: {
    start: string;
    end: string;
    timezone: string;
  };
}

/**
 * Delivery interface for notifications
 */
export interface NotificationDelivery {
  /**
   * Delivery ID
   */
  id: string;
  /**
   * Template ID
   */
  templateId: string;
  /**
   * User ID
   */
  userId: string;
  /**
   * Channel
   */
  channel: NotificationChannel;
  /**
   * Status
   */
  status: 'pending' | 'sent' | 'failed' | 'delivered' | 'read';
  /**
   * Sent at
   */
  sentAt?: string;
  /**
   * Delivered at
   */
  deliveredAt?: string;
  /**
   * Read at
   */
  readAt?: string;
  /**
   * Error
   */
  error?: string;
  /**
   * Metadata
   */
  metadata?: Record<string, unknown>;
}

/**
 * Stats interface for notifications
 */
export interface NotificationStats {
  /**
   * Template ID
   */
  templateId: string;
  /**
   * Sent count
   */
  sent: number;
  /**
   * Delivered count
   */
  delivered: number;
  /**
   * Read count
   */
  read: number;
  /**
   * Failed count
   */
  failed: number;
  /**
   * Click through rate
   */
  clickThrough?: number;
  /**
   * AB test results
   */
  abTestResults?: {
    variantId: string;
    sent: number;
    delivered: number;
    read: number;
    clickThrough: number;
  }[];
}

/**
 * Batch interface for notifications
 */
export interface NotificationBatch {
  /**
   * Batch ID
   */
  id: string;
  /**
   * Template ID
   */
  templateId: string;
  /**
   * Status
   */
  status: 'pending' | 'processing' | 'completed' | 'failed';
  /**
   * Total count
   */
  totalCount: number;
  /**
   * Processed count
   */
  processedCount: number;
  /**
   * Success count
   */
  successCount: number;
  /**
   * Failure count
   */
  failureCount: number;
  /**
   * Started at
   */
  startedAt: string;
  /**
   * Completed at
   */
  completedAt?: string;
  /**
   * Error
   */
  error?: string;
}